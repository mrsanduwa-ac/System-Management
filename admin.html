<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Dashboard - Order System</title>
  <link rel="stylesheet" href="admin.css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body class="bg-slate-900 text-slate-100 font-sans">
  <!-- Beautiful animated star background -->
  <div class="star-bg" id="star-bg"></div>
  <div class="max-w-6xl mx-auto p-6 relative z-10">
    <div class="flex justify-between items-center mb-8">
      <div class="flex items-center gap-3">
        <img src="logo.png" alt="Logo" onerror="this.style.display='none'" class="w-14 h-14 object-contain rounded-full border-2 border-blue-400 shadow-md" />
        <h1 class="text-3xl font-bold text-blue-300 tracking-wide">Admin Dashboard</h1>
      </div>
      <div class="flex gap-2">
        <button id="homeBtn" class="px-4 py-2 rounded bg-blue-500 hover:bg-blue-600">Home</button>
        <button id="logoutBtn" class="px-4 py-2 rounded bg-red-500 hover:bg-red-600">Logout</button>
      </div>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
      <div class="bg-slate-800 p-4 rounded shadow flex flex-col items-center">
        <h2 class="text-lg font-semibold text-slate-400 mb-2">Today Scans</h2>
        <p id="todayCount" class="text-4xl font-extrabold text-green-400 mb-1">0</p>
        <span class="text-xs text-slate-500">All scanned today</span>
      </div>
      <div class="bg-slate-800 p-4 rounded shadow flex flex-col items-center">
        <h2 class="text-lg font-semibold text-slate-400 mb-2">Total Barcodes</h2>
        <p id="totalCount" class="text-4xl font-extrabold text-blue-400 mb-1">0</p>
        <span class="text-xs text-slate-500">All barcodes loaded</span>
      </div>
      <div class="bg-slate-800 p-4 rounded shadow flex flex-col items-center">
        <h2 class="text-lg font-semibold text-slate-400 mb-2">Deleted Barcodes</h2>
        <p id="deletedCount" class="text-4xl font-extrabold text-red-400 mb-1">0</p>
        <button id="viewDeletedBtn" class="btn-secondary mt-1 px-3 py-1 rounded text-xs">View</button>
      </div>
      <div class="bg-slate-800 p-4 rounded shadow flex flex-col items-center">
        <h2 class="text-lg font-semibold text-slate-400 mb-2">Export/Print</h2>
        <button id="exportCsvBtn" class="btn-success px-4 py-1 my-1 rounded w-full">Export CSV</button>
        <button id="exportJsonBtn" class="btn-info px-4 py-1 my-1 rounded w-full">Export JSON</button>
        <button id="printBtn" class="btn-primary px-4 py-1 my-1 rounded w-full">Print</button>
      </div>
    </div>
    <div class="mb-4 flex flex-wrap items-end gap-4">
      <div>
        <label class="block mb-2">Filter by Date</label>
        <input type="date" id="filterDate" class="p-2 rounded border border-slate-600 text-black"/>
        <button id="loadDataBtn" class="ml-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 rounded">Load</button>
      </div>
      <div>
        <label class="block mb-2">Search Barcode</label>
        <input type="text" id="searchInput" class="p-2 rounded border border-slate-600 text-black" placeholder="Type barcode..."/>
      </div>
      <div>
        <button id="reloadBtn" class="ml-2 px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded">Reload All</button>
        <button id="clearListBtn" class="ml-2 px-4 py-2 bg-yellow-600 hover:bg-yellow-700 rounded">Clear List</button>
      </div>
    </div>
    <div class="overflow-x-auto rounded-lg shadow">
      <table class="min-w-full bg-slate-800 rounded text-sm">
        <thead>
          <tr class="bg-slate-700 text-left">
            <th class="py-2 px-4">Timestamp</th>
            <th class="py-2 px-4">Barcode</th>
            <th class="py-2 px-4">Action</th>
          </tr>
        </thead>
        <tbody id="orderTableBody">
          <tr>
            <td colspan="2" class="text-center py-4 text-slate-400">No data loaded.</td>
          </tr>
        </tbody>
      </table>
    </div>
    <!-- Print Layout: Same as Home Page -->
    <div class="print-header" id="printHeader">
      WORLD OUT FASHION
    </div>
    <div class="print-datetime" id="printDateTime"></div>
    <div class="barcode-grid" id="barcodePrintGrid"></div>
  </div>
  <audio id="success-sound" preload="auto" src="https://www.soundjay.com/misc/sounds/bell-ringing-05.wav"></audio>
  <audio id="error-sound" preload="auto" src="https://www.soundjay.com/misc/sounds/fail-buzzer-02.wav"></audio>
  <script src="admin.js"></script>
  <script>
  // Animated star background (same as main app)
  (function starBackground() {
    const STAR_COUNT = 80;
    const starBg = document.getElementById("star-bg");
    if (!starBg) return;
    function random(min, max) { return Math.random() * (max - min) + min; }
    function createStar(i) {
      const star = document.createElement("div");
      star.className = "star-dot";
      star.style.position = "absolute";
      star.style.left = `${random(0, 100)}vw`;
      star.style.top = `${random(-20, 100)}vh`;
      star.style.opacity = random(0.3, 1);
      star.style.width = star.style.height = `${random(1.5, 3.5)}px`;
      star.style.borderRadius = "50%";
      star.style.background = "white";
      star.style.animation = `starMove ${random(12, 24)}s linear infinite`;
      star.style.animationDelay = `${-random(0, 24)}s`;
      starBg.appendChild(star);
    }
    for (let i = 0; i < STAR_COUNT; i++) createStar(i);
  })();

  // Home button functionality
  document.addEventListener("DOMContentLoaded", function() {
    var homeBtn = document.getElementById("homeBtn");
    if(homeBtn) homeBtn.onclick = () => window.location.href = "index.html";
  });
  </script>
  <style>
    .star-bg {
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
      overflow: hidden;
    }
    @keyframes starMove {
      0% { transform: translateY(0); }
      100% { transform: translateY(100vh); }
    }
    .btn-primary { background: #3b82f6; color: white; }
    .btn-success { background: #10b981; color: white; }
    .btn-info { background: #0ea5e9; color: white; }
    .btn-secondary { background: #64748b; color: white; }
    .btn-primary:hover { background: #2563eb; }
    .btn-success:hover { background: #059669; }
    .btn-info:hover { background: #0369a1; }
    .btn-secondary:hover { background: #475569; }
    /* Hide logo and admin controls on print, show print layout */
    @media print {
      img[alt="Logo"], .star-bg, #logoutBtn, #viewDeletedBtn, #exportCsvBtn, #exportJsonBtn, #printBtn, #loadDataBtn, #reloadBtn, #searchInput, #filterDate, .mb-4, .grid, table, thead, tbody, .shadow, .rounded-lg, .overflow-x-auto, .max-w-6xl > .flex { display: none !important; }
      .print-header, .print-datetime, .barcode-grid { display: block !important; }
      body { background: white !important; color: #111 !important; }
    }
    /* Print barcode grid, same as home */
    .print-header {
      font-family: 'Orbitron', 'Segoe UI', Arial, sans-serif;
      font-size: 2.3rem;
      font-weight: bold;
      letter-spacing: .15em;
      color: #20fff7;
      text-shadow:
        0 0 10px #00f0ff,
        0 0 30px #20fff7,
        0 0 60px #5b6cff,
        0 0 90px #5b6cff;
      text-align: center;
      margin-bottom: 0.5em;
      display: none;
    }
    .print-datetime {
      font-size: 1.2rem;
      color: #b2c2ff;
      text-align: center;
      margin-bottom: 1.5em;
      display: none;
    }
    .barcode-grid {
      display: none;
    }
    @media print {
      .barcode-grid {
        display: grid !important;
        grid-template-columns: repeat(5, 1fr) !important;
        gap: 10px !important;
        font-size: 12px !important;
        background: transparent !important;
        color: #111 !important;
        margin-top: 2em !important;
      }
      .barcode-grid ul {
        padding-left: 0;
        list-style: none;
      }
      .barcode-grid li {
        padding: 2px 0;
        border-bottom: 1px dashed #ddd;
        margin: 0 0 2px 0;
        font-family: 'Fira Mono', monospace, monospace;
        font-size: 13px;
      }
      .print-header, .print-datetime {
        display: block !important;
        page-break-after: avoid;
      }
    }
    .star-dot {
      box-shadow: 0 0 6px 2px #fff, 0 0 20px 4px #0ff2, 0 0 40px 8px #0ff1;
      transition: opacity 0.5s;
    }
    .star-dot.twinkle {
      animation: twinkle 2s infinite alternate;
    }
    @keyframes twinkle {
      0% { opacity: 0.7; }
      100% { opacity: 1; }
    }
  </style>
</body>
</html>