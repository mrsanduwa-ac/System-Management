<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World Out Fashion - Order Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Feather Icons for a modern look -->
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        /* --- NEW: Animated Constellation Background --- */
        body { background: #000; font-family: 'Inter', sans-serif; color: #e2e8f0; overflow: hidden; }
        #constellation { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; }
        .main-container { position: relative; z-index: 1; width: 100%; height: 100%; overflow-y: auto; padding: 1rem; display: flex; align-items: center; justify-content: center; }

        /* --- NEW: Glassmorphism Card Effect --- */
        .card { background: rgba(16, 18, 27, 0.4); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .bg-card-section { background: rgba(30, 41, 59, 0.3); }

        #passcode-modal { display: flex; align-items: center; justify-content: center; position: fixed; inset: 0; background-color:rgba(0,0,0,0.5); backdrop-filter: blur(10px); z-index: 999; }
        #main-app { display: none; }
        
        .delete-barcode-btn{ background:transparent; color: #ef4444; border:none; border-radius:50%; width:28px; height:28px; cursor:pointer; font-weight:700; margin-left:1rem; transition: all .2s; font-size:16px; display:flex; align-items:center; justify-content:center; }
        .delete-barcode-btn:hover{ background: #ef4444; color: white; }
        .barcode-item { transition: all 0.3s ease-in-out; }
        .barcode-item.fade-out { opacity: 0; transform: translateX(20px); }
        
        /* --- Scrollbar and other utility styles --- */
        .overflow-y-auto::-webkit-scrollbar{width:8px}.overflow-y-auto::-webkit-scrollbar-track{background:rgba(30,41,59,0.5)}.overflow-y-auto::-webkit-scrollbar-thumb{background:#4a5568;border-radius:10px}
        .status-message{transition:all .5s ease-in-out;overflow:hidden;max-height:0;padding:0;margin-top:0;opacity:0}.status-message.show{max-height:100px;padding:.5rem;margin-top:.75rem;opacity:1}
        .auto-save-status{opacity:0;transition:opacity .5s ease;color:#48bb78}.auto-save-status.show{opacity:1}
        .text-primary{color:#e2e8f0}.text-secondary{color:#a0aec0}.border-theme{border-color:rgba(255,255,255,.1)}
        .btn{ display: flex; align-items: center; justify-content: center; gap: 0.5rem; border-radius: 0.5rem; font-weight: 600; box-shadow: 0 1px 3px 0 rgba(0,0,0,0.1), 0 1px 2px -1px rgba(0,0,0,0.1); transition: all 0.2s; padding: 0.75rem 1.5rem; }
        .btn-primary{background-color:#4299e1;color:#fff}.btn-primary:hover{background-color:#2b6cb0}
        .btn-secondary{background-color:#4a5568;color:#e2e8f0;border:1px solid #718096}.btn-secondary:hover{background-color:#2d3748}
        .btn-danger{background-color:#e53e3e;color:#fff}.btn-danger:hover{background-color:#c53030}
        .btn-info{background-color:#5a67d8;color:#fff}.btn-info:hover{background-color:#4c51bf}
        .btn-success{background-color:#38a169;color:#fff}.btn-success:hover{background-color:#2f855a}
        input,select,textarea{background-color:#1a202c;border-color:#4a5568;color:#e2e8f0}input::placeholder,textarea::placeholder{color:#718096}input[type=date]::-webkit-calendar-picker-indicator{filter:invert(.8);cursor:pointer}
        
        .swal2-popup{background-color:#1a202c!important;color:#e2e8f0!important;border:1px solid rgba(255,255,255,.1)!important;border-radius:1rem!important}.swal2-title{color:#e2e8f0!important}.swal2-html-container{color:#a0aec0!important}.swal2-confirm,.swal2-cancel{border-radius:.5rem!important}
        #swal2-html-container .deleted-table{width:100%;text-align:left;border-collapse:collapse;margin-top:1rem}#swal2-html-container .deleted-table td,#swal2-html-container .deleted-table th{padding:8px;border-bottom:1px solid #4a5568}#swal2-html-container .deleted-table th{font-weight:700}
        
        @media print{body>*{display:none!important}#print-area{display:block!important;position:absolute;left:0;top:0;width:100%;padding:1cm;box-sizing:border-box;font-family:Arial,sans-serif;color:#000;background-color:#fff}.no-print{display:none!important}#print-header{display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid #000;padding-bottom:10px;margin-bottom:15px}.print-company-name{font-size:16pt;font-weight:700}.print-date-time{font-size:10pt}#printBarcodeList{font-size:9pt;padding:0;margin:0;column-count:5;column-gap:15px;height:auto;column-fill:auto}#printBarcodeList>div{break-inside:avoid;page-break-inside:avoid;padding:2px 0;white-space:nowrap}}
    </style>
</head>
<body>
    <canvas id="constellation"></canvas>
    <div id="passcode-modal"><div class="card p-8 rounded-2xl shadow-2xl w-full max-w-sm text-center"><h2 class="text-2xl font-bold mb-4 text-primary">Enter Passcode</h2><p class="text-secondary mb-6">Please enter the passcode to access the application.</p><input type="password" id="passcodeInput" inputmode="numeric" pattern="[0-9]*" class="w-full p-3 mb-4 text-center text-lg border-2 border-blue-500 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" autocomplete="off"><button id="passcodeSubmitBtn" class="w-full btn btn-primary">Enter</button><p id="passcode-error" class="text-red-400 mt-4 h-4"></p></div></div>
    <div id="main-app" class="main-container"><div class="card p-6 lg:p-8 rounded-2xl shadow-2xl w-full max-w-7xl no-print"><div class="flex justify-between items-center mb-6 flex-wrap gap-4"><h1 class="text-2xl lg:text-3xl font-extrabold"><span class="bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-500">Order Management System</span></h1><div id="live-clock" class="text-lg lg:text-xl font-semibold text-slate-300 order-3 lg:order-2 w-full lg:w-auto text-center"></div></div><div class="flex flex-col lg:flex-row gap-8 mt-4"><div class="w-full lg:w-3/5 flex flex-col gap-y-6"><p class="text-center text-secondary -mt-2">Scan order items.</p><div class="p-4 bg-blue-900/30 rounded-lg border border-blue-700/50 text-center shadow-md"><p class="text-xl font-semibold text-blue-200">Unique Barcodes: <span id="uniqueOrderCount" class="text-purple-400 text-2xl font-bold">0</span></p></div><div><div class="flex flex-col sm:flex-row gap-4"><input type="text" id="orderScanInput" placeholder="Barcode number..." class="flex-grow p-3 border-2 border-blue-500 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-200 shadow-sm"><button id="addOrderBarcodeBtn" class="btn btn-primary"><i data-feather="plus"></i>Scan</button></div><div id="statusMessage" class="status-message rounded-lg text-center font-semibold p-2"></div></div><div><div class="flex justify-between items-center mb-4"><h2 class="text-2xl font-bold text-primary border-b-2 border-purple-500 pb-2">Scanned Barcodes</h2><div class="relative"><i data-feather="search" class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"></i><input type="text" id="barcodeSearchInput" placeholder="Search..." class="pl-10 p-2 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 text-sm"></div></div><div id="orderListContainer" class="bg-card-section p-4 rounded-lg border border-theme max-h-60 lg:max-h-80 overflow-y-auto shadow-inner"><ul id="scannedOrderBarcodesList" class="space-y-2"><p id="noOrderBarcodesMessage" class="text-secondary text-center py-4">No barcodes scanned.</p></ul></div></div><button id="clearCurrentOrderBtn" class="btn btn-secondary"><i data-feather="trash-2"></i>Clear Current Order</button></div><div class="w-full lg:w-2/5 flex flex-col gap-y-8"><div class="p-6 bg-card-section rounded-xl border border-theme shadow-inner h-fit"><h2 class="text-2xl font-bold text-primary mb-4 border-b-2 border-purple-500 pb-2">Export & Tools</h2><button id="showDeletedBtn" class="w-full mb-4 btn btn-secondary"><i data-feather="archive"></i>Recycle Bin</button><button id="printScannedOrderBtn" class="w-full btn btn-info"><i data-feather="printer"></i>Print Order (A4)</button><button id="downloadCsvBtn" class="mt-4 w-full btn btn-success"><i data-feather="download"></i>Download CSV</button></div><div class="p-6 bg-card-section rounded-xl border border-theme shadow-inner h-fit"><div class="flex justify-between items-center mb-4"><h2 class="text-2xl font-bold text-primary border-b-2 border-purple-500 pb-2">Load Orders</h2><span id="autoSaveStatus" class="auto-save-status font-semibold">âœ“ Saved</span></div><div class="mb-4"><label for="searchByDate" class="block mb-2 text-sm font-medium text-secondary">Search by Date</label><div class="flex gap-2"><input type="date" id="searchByDate" class="w-full p-2 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"><button id="resetDateFilterBtn" class="p-2 rounded-lg shadow-md transition transform hover:scale-105 btn-secondary text-xs"><i data-feather="rotate-ccw"></i></button></div></div><div class="flex flex-col sm:flex-row gap-4"><select id="savedSessionsSelect" class="flex-grow p-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"><option value="">Select a saved session</option></select><button id="loadSelectedSessionBtn" class="btn btn-primary"><i data-feather="refresh-cw"></i>Load</button></div><button id="deleteSelectedSessionBtn" class="mt-4 w-full btn btn-danger"><i data-feather="x-octagon"></i>Delete Session</button></div></div></div></div></div>
    <div id="print-area" class="hidden"><div id="print-header"><div class="print-company-name">WORLD OUT FASHION</div><div class="print-date-time"></div></div><div id="printBarcodeList"></div></div>
    <audio id="success-sound" src="https://www.myinstants.com/media/sounds/applepay.mp3" preload="auto"></audio>
    <audio id="error-sound" src="https://github.com/sandaruwanS/sound-effects/raw/main/error.mp3" preload="auto"></audio>
    
    <script>
    // --- Constellation Background Script ---
    const canvas=document.getElementById("constellation"),ctx=canvas.getContext("2d");canvas.width=window.innerWidth,canvas.height=window.innerHeight;let stars=[],FPS=60,x=100,mouse={x:0,y:0};for(let e=0;e<x;e++)stars.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,radius:Math.random()*1+1,vx:Math.floor(50*Math.random())-25,vy:Math.floor(50*Math.random())-25});function draw(){ctx.clearRect(0,0,canvas.width,canvas.height),ctx.globalCompositeOperation="lighter";for(let e=0,t=stars.length;e<t;e++){let o=stars[e];ctx.fillStyle="#fff",ctx.beginPath(),ctx.arc(o.x,o.y,o.radius,0,2*Math.PI),ctx.fill(),ctx.fillStyle="black",ctx.stroke()}ctx.beginPath();for(let e=0,t=stars.length;e<t;e++){let o=stars[e];ctx.moveTo(o.x,o.y),distance(mouse,o)<150&&ctx.lineTo(mouse.x,mouse.y);for(let s=0,n=stars.length;s<n;s++){let a=stars[s];distance(o,a)<150&&ctx.lineTo(a.x,a.y)}}ctx.lineWidth=.05,ctx.strokeStyle="white",ctx.stroke()}function distance(e,t){let o=0,s=0;return o=t.x-e.x,o*=o,s=t.y-e.y,s*=s,Math.sqrt(o+s)}function update(){for(let e=0,t=stars.length;e<t;e++){let o=stars[e];o.x+=o.vx/FPS,o.y+=o.vy/FPS,(o.x<0||o.x>canvas.width)&&(o.vx=-o.vx),(o.y<0||o.y>canvas.height)&&(o.vy=-o.vy)}}canvas.addEventListener("mousemove",function(e){mouse.x=e.clientX,mouse.y=e.clientY}),function tick(){draw(),update(),requestAnimationFrame(tick)}();

    // --- Main Application Script ---
    const WEB_APP_URL="https://script.google.com/macros/s/AKfycbwCvptMvfnyyT1KXET2QfFBudL95ib7kK1A737v5wYPPh_X3v4p1zUZ8VDynaZ8rLix/exec";let scannedUniqueBarcodes=new Set,currentSessionId=null,userPasscode=null,allSessions=[];const el={mainApp:document.getElementById("main-app"),passcodeModal:document.getElementById("passcode-modal"),passcodeInput:document.getElementById("passcodeInput"),passcodeSubmitBtn:document.getElementById("passcodeSubmitBtn"),passcodeError:document.getElementById("passcode-error"),backgroundContainer:document.querySelector(".background-container"),statusMessage:document.getElementById("statusMessage"),liveClock:document.getElementById("live-clock"),uniqueOrderCount:document.getElementById("uniqueOrderCount"),orderScanInput:document.getElementById("orderScanInput"),addOrderBarcodeBtn:document.getElementById("addOrderBarcodeBtn"),scannedOrderBarcodesList:document.getElementById("scannedOrderBarcodesList"),noOrderBarcodesMessage:document.getElementById("noOrderBarcodesMessage"),orderListContainer:document.getElementById("orderListContainer"),clearCurrentOrderBtn:document.getElementById("clearCurrentOrderBtn"),printScannedOrderBtn:document.getElementById("printScannedOrderBtn"),downloadCsvBtn:document.getElementById("downloadCsvBtn"),savedSessionsSelect:document.getElementById("savedSessionsSelect"),loadSelectedSessionBtn:document.getElementById("loadSelectedSessionBtn"),deleteSelectedSessionBtn:document.getElementById("deleteSelectedSessionBtn"),searchByDate:document.getElementById("searchByDate"),resetDateFilterBtn:document.getElementById("resetDateFilterBtn"),autoSaveStatus:document.getElementById("autoSaveStatus"),successSound:document.getElementById("success-sound"),errorSound:document.getElementById("error-sound"),printDateTime:document.querySelector(".print-date-time"),printBarcodeList:document.getElementById("printBarcodeList"),showDeletedBtn:document.getElementById("showDeletedBtn"),barcodeSearchInput:document.getElementById("barcodeSearchInput")};async function validateAndLoadApp(e){el.passcodeError.textContent="",el.passcodeSubmitBtn.disabled=!0,el.passcodeSubmitBtn.innerHTML='<i data-feather="loader" class="animate-spin"></i>Checking...',feather.replace();try{const t=`${WEB_APP_URL}?passcode=${encodeURIComponent(e)}&t=${(new Date).getTime()}`,o=await fetch(t);if(!o.ok)throw new Error("Network error");const s=await o.json();if(s.error)throw new Error(s.error);userPasscode=e,allSessions=s,el.passcodeModal.style.display="none",document.body.style.overflow="auto",el.mainApp.style.display="flex",initializeMainApp()}catch(e){el.passcodeError.textContent="Invalid passcode. Please try again.",el.passcodeSubmitBtn.disabled=!1,el.passcodeSubmitBtn.textContent="Enter"}}function initializeMainApp(){updateClock(),setInterval(updateClock,1e3),populateSessionsDropdown(allSessions),attachEventListeners(),feather.replace()}function attachEventListeners(){el.orderScanInput.addEventListener("keypress",e=>"Enter"===e.key&&handleOrderScan()),el.addOrderBarcodeBtn.addEventListener("click",handleOrderScan),el.clearCurrentOrderBtn.addEventListener("click",clearCurrentOrder),el.printScannedOrderBtn.addEventListener("click",printScannedOrder),el.downloadCsvBtn.addEventListener("click",downloadCsv),el.loadSelectedSessionBtn.addEventListener("click",loadSelectedSession),el.deleteSelectedSessionBtn.addEventListener("click",deleteSelectedSession),el.searchByDate.addEventListener("input",filterSessionsByDate),el.resetDateFilterBtn.addEventListener("click",()=>{el.searchByDate.value="",filterSessionsByDate()}),el.scannedOrderBarcodesList.addEventListener("click",e=>{e.target.closest(".delete-barcode-btn")&&deleteSingleBarcode(e.target.closest(".delete-barcode-btn").dataset.barcode)}),el.showDeletedBtn.addEventListener("click",showDeletedBarcodes),el.barcodeSearchInput.addEventListener("input",filterScannedBarcodes)}async function handleOrderScan(){const e=el.orderScanInput.value.trim();if(!e)return;if(scannedUniqueBarcodes.has(e))el.errorSound.play(),showStatusMessage(`Already Scanned: ${e}`,"error");else{0===scannedUniqueBarcodes.size&&(currentSessionId=(new Date).getTime().toString()),scannedUniqueBarcodes.add(e),el.successSound.play(),renderPermanentBarcodes();const t=currentSessionId,o=`Session - ${getTimestamp(t)}`;await fetch(WEB_APP_URL,{method:"POST",mode:"cors",body:JSON.stringify({action:"saveBarcode",passcode:userPasscode,sessionID:t,sessionName:o,barcode:e})}),showStatusMessage(`Success: ${e}`,"success"),updateAllSessions(t,o,e)}el.orderScanInput.value="",el.orderScanInput.focus()}async function deleteSingleBarcode(e){if(!currentSessionId)return;if(scannedUniqueBarcodes.has(e)){const t=document.querySelector(`[data-barcode="${e}"]`).closest("li");t&&t.classList.add("fade-out"),scannedUniqueBarcodes.delete(e);try{await fetch(WEB_APP_URL,{method:"POST",mode:"cors",body:JSON.stringify({action:"deleteSingleBarcode",passcode:userPasscode,sessionID:currentSessionId,barcode:e})})}catch(e){console.error("Delete Single Barcode Error:",e)}const o=allSessions.findIndex(t=>t.id===currentSessionId);-1!==o&&(allSessions[o].data.uniqueBarcodes=allSessions[o].data.uniqueBarcodes.filter(t=>t!==e)),setTimeout(()=>{renderPermanentBarcodes(),0===scannedUniqueBarcodes.size&&(currentSessionId=null)},300)}}async function deleteSelectedSession(){const e=el.savedSessionsSelect.value;if(!e)return Swal.fire({title:"Oops...",text:"Please select a session to delete.",icon:"warning"});const t=await Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"});t.isConfirmed&&fetch(WEB_APP_URL,{method:"POST",mode:"cors",body:JSON.stringify({action:"deleteSession",passcode:userPasscode,sessionID:e})}).then(t=>{Swal.fire({title:"Deleted!",text:"The session has been deleted.",icon:"success",timer:1500}),currentSessionId===e&&clearCurrentOrder(!1),allSessions=allSessions.filter(t=>t.id!==e),filterSessionsByDate()}).catch(e=>{Swal.fire("Error!","Could not delete the session.","error")})}function loadSelectedSession(){const e=el.savedSessionsSelect.value;if(!e)return Swal.fire({title:"Oops...",text:"Please select a session to load.",icon:"warning"});const t=allSessions.find(t=>t.id===e);t&&(currentSessionId=t.id,scannedUniqueBarcodes=new Set(t.data.uniqueBarcodes||[]),renderPermanentBarcodes(),Swal.fire({title:"Loaded!",text:`Session '${t.name}' has been loaded.`,icon:"success",timer:1500}))}function renderPermanentBarcodes(){const e=el.barcodeSearchInput.value.toLowerCase();el.scannedOrderBarcodesList.innerHTML="";const t=Array.from(scannedUniqueBarcodes).filter(t=>t.toLowerCase().includes(e));const o=t.length>0;if(el.noOrderBarcodesMessage.style.display=o?"none":"block",o){const e=t.reverse();e.forEach((t,o)=>{const s=document.createElement("li");s.className="flex items-center justify-between p-2 rounded-md shadow-sm border text-lg font-medium bg-gray-700/50 border-gray-600/50 text-gray-200 barcode-item",s.innerHTML=`<span>${t}</span><button class="delete-barcode-btn no-print" data-barcode="${t}" title="Delete this barcode"><i data-feather="x" class="pointer-events-none"></i></button>`,el.scannedOrderBarcodesList.appendChild(s)}),el.orderListContainer.scrollTop=0}el.uniqueOrderCount.textContent=scannedUniqueBarcodes.size,feather.replace()}function populateSessionsDropdown(e){el.savedSessionsSelect.innerHTML='<option value="">Select a saved session</option>',e.sort((e,t)=>t.createdAt-e.createdAt).forEach(e=>{const t=document.createElement("option");t.value=e.id,t.textContent=e.name,el.savedSessionsSelect.appendChild(t)}),el.savedSessionsSelect.value=currentSessionId}function filterSessionsByDate(){const e=el.searchByDate.value,t=e?allSessions.filter(t=>(new Date(t.createdAt)).toLocaleDateString("en-CA")===e):allSessions;populateSessionsDropdown(t)}async function clearCurrentOrder(){if(0===scannedUniqueBarcodes.size)return;const e=await Swal.fire({title:"Are you sure?",text:"This will clear all currently scanned items.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, clear it!"});e.isConfirmed&&(scannedUniqueBarcodes.clear(),currentSessionId=null,renderPermanentBarcodes(),Swal.fire({title:"Cleared!",icon:"info",timer:1500}))}function showStatusMessage(e,t){el.statusMessage.textContent=e,el.statusMessage.className=`status-message rounded-lg text-center font-semibold p-2 ${"success"===t?"bg-green-800 text-green-200":"bg-red-800 text-red-200"}`,el.statusMessage.classList.add("show"),setTimeout(()=>el.statusMessage.classList.remove("show"),2500)}function updateClock(){el.liveClock.textContent=(new Date).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}function getTimestamp(e){return(new Date(parseInt(e,10))).toLocaleString("en-US",{dateStyle:"short",timeStyle:"short",hour12:!1})}function printScannedOrder(){if(0===scannedUniqueBarcodes.size)return Swal.fire({title:"Empty!",text:"There are no barcodes to print.",icon:"warning"});el.printDateTime.textContent=(new Date).toLocaleString("en-US",{dateStyle:"long",timeStyle:"short"}),el.printBarcodeList.innerHTML=Array.from(scannedUniqueBarcodes).map((e,t)=>`<div>${t+1}. ${e}</div>`).join(""),window.print()}function downloadCsv(){if(0===scannedUniqueBarcodes.size)return Swal.fire({title:"Empty!",text:"There are no barcodes to download.",icon:"warning"});const e="Barcode\n"+Array.from(scannedUniqueBarcodes).join("\n"),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a");o.href=URL.createObjectURL(t),o.download=`scanned_order_${Date.now()}.csv`,o.click(),URL.revokeObjectURL(o.href)}function filterScannedBarcodes(){renderPermanentBarcodes()}function updateAllSessions(e,t,o){const s=allSessions.findIndex(t=>t.id===e);-1!==s?allSessions[s].data.uniqueBarcodes.push(o):allSessions.push({id:e,name:t,createdAt:parseInt(e),data:{uniqueBarcodes:[o]}})}async function showDeletedBarcodes(){Swal.fire({title:"Loading Deleted Items...",didOpen:()=>{Swal.showLoading()}});try{const e=`${WEB_APP_URL}?passcode=${encodeURIComponent(userPasscode)}&action=getDeletedBarcodes&t=${(new Date).getTime()}`,t=await fetch(e),o=await t.json();if(!t.ok)throw new Error("Failed to fetch");let s="<p>No recently deleted barcodes found.</p>";if(Array.isArray(o)&&o.length>0){s='<div style="max-height: 40vh; overflow-y: auto;"><table class="deleted-table"><thead><tr><th>Barcode</th><th>Deleted At</th></tr></thead><tbody>';const e=o.reverse();e.forEach(e=>{const t=(new Date(e[1])).toLocaleString("en-US");s+=`<tr><td>${e[0]}</td><td>${t}</td></tr>`}),s+="</tbody></table></div>"}Swal.fire({title:"Recycle Bin",html:s,icon:"info"})}catch(e){Swal.fire("Error","Could not retrieve deleted items.","error")}}const handlePasscodeSubmit=()=>{const e=el.passcodeInput.value.trim();e&&validateAndLoadApp(e)};el.passcodeSubmitBtn.addEventListener("click",handlePasscodeSubmit),el.passcodeInput.addEventListener("keypress",e=>"Enter"===e.key&&handlePasscodeSubmit());
    </script>
</body>
</html>
